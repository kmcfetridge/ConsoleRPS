<!DOCTYPE html>
<html>
<head>
	<title>Rock Paper Scissors</title>
	<link rel="stylesheet" type="text/css" href="styles/style.css">
</head>
<body>
	<div id="main">
		<header>
			<h1>Rock - Paper - Scissors</h1>
		</header>
		<main>
			<p>Score</p>
			<div id="score">
				<div id="playerScoreBoard" class="scr">Your Points : <span id="playerScore">0</span></div>
				<div id="roundsPlayed" class="scr">Round : <span id="rounds">0</span></div>
				<div id="computerScoreBoard" class="scr">Computer Points : <span id="computerScore">0</span></div>
			</div>
			<div id="btnGroup">
				<button class="btn">ROCK</button>
				<button class="btn">PAPER</button>
				<button class="btn">SCISSORS</button>
			</div>
			<div id="events">
				<div id="playerChoice" class="evn">example</div>
				<div id="computerChoice" class="evn">example</div>
			</div>
		</main>
	</div>
	<script type="text/javascript">
		function playRound(e) {
			console.log('*******************************');
			let playerChoice = convertPlayerChoiceToNum(e.target.innerHTML);
			let computerChoice = computerPlay();
			console.log('Round : ' + ++round);
			convertComputerChoiceToString(computerChoice);
			playRPS(playerChoice, computerChoice);
			updateScore();
		}

		const btn = document.querySelectorAll(".btn");
		btn.forEach(function(button) {
			button.addEventListener("click", playRound);
		}); 

		let rock = 'Rock', paper = 'Paper', scissors = 'Scissors';
		let win = 'You Win!', lose = 'You Lose!'
		let playerScore = 0, computerScore = 0, round = 0;

		function getRandomInt(num) {
			return Math.floor(Math.random() * num);
		}

		function computerPlay() {
			return getRandomInt(3);
		}

		function playRPS(playerSelection, computerSelection ) {
			let results = "";
			switch(playerSelection) {
				case 0:
					switch(computerSelection) {
						case 0:
							results = 'Draw!';
							break;
						case 1:
							computerScore++;
							results = lose + ' ' + paper + ' covers ' + rock;
							break;
						case 2:
							playerScore++;
							results = win + ' ' + rock + ' breaks ' + scissors;
							break;
					}
					break;
				case 1:
					switch(computerSelection) {
						case 0:
							playerScore++;
							results = win + ' ' + paper + ' covers ' + rock;
							break;
						case 1:
							results = 'Draw!';
							break;
						case 2:
							computerScore++;
							results = lose + ' ' + scissors + ' cut ' + paper;
							break;
					}
					break;
				case 2:
					switch(computerSelection) {
						case 0:
							computerScore++;
							results = lose + ' ' + rock + ' breaks ' + scissors;
							break;
						case 1:
							playerScore++;
							results = win + ' ' + scissors + ' cut ' + paper;
							break;
						case 2:
							results = 'Draw!';
							break;
					}
					break;
			}
			console.log(results);
		}

		function max(num1, num2) {
			return (num1 > num2) ? num1 : num2;
		}

		function convertPlayerChoiceToNum(choice) {
			if(choice !== null) {
				if(choice.toLowerCase() === rock.toLowerCase()) {
					console.log('Player chose ' + rock);
					return 0;
				}

				if(choice.toLowerCase() === paper.toLowerCase()) {
					console.log('Player chose ' + paper);
					return 1;
				} 

				if(choice.toLowerCase() === scissors.toLowerCase()) {
					console.log('Player chose ' + scissors);
					return 2;
				}
			}
			console.log("Error: Invalid Choice");
			return -1;
		}

		function convertComputerChoiceToString(computerChoice) {
			switch(computerChoice) {
				case 0:
					console.log('Computer chose ' + rock);
					break;
				case 1:
					console.log('Computer chose ' + paper);
					break;
				case 2:
					console.log('Computer chose ' + scissors);
					break;
			}
		}

		function updateScore() {
			document.getElementById("playerScore").innerHTML = playerScore;
			document.getElementById("computerScore").innerHTML = computerScore;
		}

		function game() {
			playerScore = computerScore = round = 0;
			console.log('New Game! Best three out of five');

			while(max(computerScore, playerScore) < 3) {
				let computerChoice = computerPlay();
				let playerChoice = -1;

				console.log('*******************************');
				console.log('Round : ' + ++round);

				while(playerChoice < 0) {
					playerChoice = convertPlayerChoiceToNum(prompt('Rock, Paper, Scissors'));
				}

				convertComputerChoiceToString(computerChoice);

				playRPS(playerChoice, computerChoice);

				printScore();
			}

			if(playerScore > 2) {
				console.log('Game Over! You Win!!!!');
			} else {
				console.log('Game Over! You Lose Dude!');
			}

		}
	</script>
</body>
</html>
